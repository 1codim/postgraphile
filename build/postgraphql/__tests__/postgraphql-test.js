"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments)).next());
    });
};
jest.mock('pg');
jest.mock('pg-connection-string');
jest.mock('../schema/createPostGraphQLSchema');
jest.mock('../http/createPostGraphQLHttpRequestHandler');
jest.mock('../watch/watchPgSchemas');
const pg_1 = require('pg');
const pg_connection_string_1 = require('pg-connection-string');
const createPostGraphQLSchema_1 = require('../schema/createPostGraphQLSchema');
const createPostGraphQLHttpRequestHandler_1 = require('../http/createPostGraphQLHttpRequestHandler');
const watchPgSchemas_1 = require('../watch/watchPgSchemas');
const postgraphql_1 = require('../postgraphql');
const chalk = require('chalk');
createPostGraphQLHttpRequestHandler_1.default.mockImplementation(({ getGqlSchema }) => Promise.resolve(getGqlSchema()).then(() => null));
watchPgSchemas_1.default.mockImplementation(() => Promise.resolve());
test('will use the first parameter as the pool if it is an instance of `Pool`', () => __awaiter(this, void 0, void 0, function* () {
    const pgPool = new pg_1.Pool();
    yield postgraphql_1.default(pgPool);
    expect(pgPool.connect.mock.calls).toEqual([[]]);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls.length).toBe(1);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].pgPool).toBe(pgPool);
}));
test('will use the config to create a new pool', () => __awaiter(this, void 0, void 0, function* () {
    pg_1.Pool.mockClear();
    createPostGraphQLHttpRequestHandler_1.default.mockClear();
    const pgPoolConfig = Symbol('pgPoolConfig');
    yield postgraphql_1.default(pgPoolConfig);
    expect(pg_1.Pool.mock.calls).toEqual([[pgPoolConfig]]);
    expect(pg_1.Pool.mock.instances[0].connect.mock.calls).toEqual([[]]);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls.length).toBe(1);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].pgPool).toBe(pg_1.Pool.mock.instances[0]);
}));
test('will parse a string config before creating a new pool', () => __awaiter(this, void 0, void 0, function* () {
    pg_1.Pool.mockClear();
    createPostGraphQLHttpRequestHandler_1.default.mockClear();
    pg_connection_string_1.parse.mockClear();
    const pgPoolConnectionString = 'abcdefghijklmnopqrstuvwxyz';
    const pgPoolConfig = Symbol('pgPoolConfig');
    pg_connection_string_1.parse.mockReturnValueOnce(pgPoolConfig);
    yield postgraphql_1.default(pgPoolConnectionString);
    expect(pg_connection_string_1.parse.mock.calls).toEqual([[pgPoolConnectionString]]);
    expect(pg_1.Pool.mock.calls).toEqual([[pgPoolConfig]]);
    expect(pg_1.Pool.mock.instances[0].connect.mock.calls).toEqual([[]]);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls.length).toBe(1);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].pgPool).toBe(pg_1.Pool.mock.instances[0]);
}));
test('will use a connected client from the pool, the schemas, and options to create a GraphQL schema', () => __awaiter(this, void 0, void 0, function* () {
    createPostGraphQLSchema_1.default.mockClear();
    createPostGraphQLHttpRequestHandler_1.default.mockClear();
    const pgPool = new pg_1.Pool();
    const schemas = [Symbol('schemas')];
    const options = Symbol('options');
    const pgClient = { release: jest.fn() };
    pgPool.connect.mockReturnValue(Promise.resolve(pgClient));
    yield postgraphql_1.default(pgPool, schemas, options);
    expect(pgPool.connect.mock.calls).toEqual([[]]);
    expect(createPostGraphQLSchema_1.default.mock.calls).toEqual([[pgClient, schemas, options]]);
    expect(pgClient.release.mock.calls).toEqual([[]]);
}));
test('will use a connected client from the pool, the default schema, and options to create a GraphQL schema', () => __awaiter(this, void 0, void 0, function* () {
    createPostGraphQLSchema_1.default.mockClear();
    createPostGraphQLHttpRequestHandler_1.default.mockClear();
    const pgPool = new pg_1.Pool();
    const options = Symbol('options');
    const pgClient = { release: jest.fn() };
    pgPool.connect.mockReturnValue(Promise.resolve(pgClient));
    yield postgraphql_1.default(pgPool, options);
    expect(pgPool.connect.mock.calls).toEqual([[]]);
    expect(createPostGraphQLSchema_1.default.mock.calls).toEqual([[pgClient, ['public'], options]]);
    expect(pgClient.release.mock.calls).toEqual([[]]);
}));
test('will use a created GraphQL schema to create the HTTP request handler and pass down options', () => __awaiter(this, void 0, void 0, function* () {
    createPostGraphQLHttpRequestHandler_1.default.mockClear();
    const pgPool = new pg_1.Pool();
    const gqlSchema = Symbol('gqlSchema');
    const options = { a: 1, b: 2, c: 3 };
    createPostGraphQLSchema_1.default.mockReturnValueOnce(Promise.resolve(gqlSchema));
    yield postgraphql_1.default(pgPool, [], options);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls.length).toBe(1);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0].length).toBe(1);
    expect(Object.keys(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0])).toEqual(['a', 'b', 'c', 'getGqlSchema', 'pgPool']);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].pgPool).toBe(pgPool);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].a).toBe(options.a);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].b).toBe(options.b);
    expect(createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].c).toBe(options.c);
    expect(yield createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0].getGqlSchema()).toBe(gqlSchema);
}));
test('will watch Postgres schemas when `watchPg` is true', () => __awaiter(this, void 0, void 0, function* () {
    const pgPool = new pg_1.Pool();
    const pgSchemas = [Symbol('a'), Symbol('b'), Symbol('c')];
    yield postgraphql_1.default(pgPool, pgSchemas, { watchPg: false });
    yield postgraphql_1.default(pgPool, pgSchemas, { watchPg: true });
    expect(watchPgSchemas_1.default.mock.calls.length).toBe(1);
    expect(watchPgSchemas_1.default.mock.calls[0].length).toBe(1);
    expect(Object.keys(watchPgSchemas_1.default.mock.calls[0][0])).toEqual(['pgPool', 'pgSchemas', 'onChange']);
    expect(watchPgSchemas_1.default.mock.calls[0][0].pgPool).toBe(pgPool);
    expect(watchPgSchemas_1.default.mock.calls[0][0].pgSchemas).toBe(pgSchemas);
    expect(typeof watchPgSchemas_1.default.mock.calls[0][0].onChange).toBe('function');
}));
test('will create a new PostGraphQL schema on when `watchPgSchemas` emits a change', () => __awaiter(this, void 0, void 0, function* () {
    watchPgSchemas_1.default.mockClear();
    createPostGraphQLHttpRequestHandler_1.default.mockClear();
    const gqlSchemas = [Symbol('a'), Symbol('b'), Symbol('c')];
    let gqlSchemaI = 0;
    createPostGraphQLSchema_1.default.mockClear();
    createPostGraphQLSchema_1.default.mockImplementation(() => Promise.resolve(gqlSchemas[gqlSchemaI++]));
    const pgPool = new pg_1.Pool();
    const pgClient = { release: jest.fn() };
    pgPool.connect.mockReturnValue(Promise.resolve(pgClient));
    const mockLog = jest.fn();
    const origLog = console.log;
    console.log = mockLog;
    yield postgraphql_1.default(pgPool, [], { watchPg: true });
    const { onChange } = watchPgSchemas_1.default.mock.calls[0][0];
    const { getGqlSchema } = createPostGraphQLHttpRequestHandler_1.default.mock.calls[0][0];
    expect(pgPool.connect.mock.calls).toEqual([[]]);
    expect(pgClient.release.mock.calls).toEqual([[]]);
    expect(yield getGqlSchema()).toBe(gqlSchemas[0]);
    onChange({ commands: ['a', 'b', 'c'] });
    expect(yield getGqlSchema()).toBe(gqlSchemas[1]);
    onChange({ commands: ['d', 'e'] });
    expect(yield getGqlSchema()).toBe(gqlSchemas[2]);
    expect(pgPool.connect.mock.calls).toEqual([[], [], []]);
    expect(pgClient.release.mock.calls).toEqual([[], [], []]);
    expect(mockLog.mock.calls).toEqual([
        [`Restarting PostGraphQL API after Postgres command(s): ️${chalk.bold.cyan('a')}, ${chalk.bold.cyan('b')}, ${chalk.bold.cyan('c')}`],
        [`Restarting PostGraphQL API after Postgres command(s): ️${chalk.bold.cyan('d')}, ${chalk.bold.cyan('e')}`],
    ]);
    console.log = origLog;
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zdGdyYXBocWwtdGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wb3N0Z3JhcGhxbC9fX3Rlc3RzX18vcG9zdGdyYXBocWwtdGVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBO0FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW1DLENBQUMsQ0FBQTtBQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLDZDQUE2QyxDQUFDLENBQUE7QUFDeEQsSUFBSSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO0FBRXBDLHFCQUFxQixJQUNyQixDQUFDLENBRHdCO0FBQ3pCLHVDQUFpRCxzQkFDakQsQ0FBQyxDQURzRTtBQUN2RSwwQ0FBb0MsbUNBQ3BDLENBQUMsQ0FEc0U7QUFDdkUsc0RBQWdELDZDQUNoRCxDQUFDLENBRDRGO0FBQzdGLGlDQUEyQix5QkFDM0IsQ0FBQyxDQURtRDtBQUNwRCw4QkFBd0IsZ0JBRXhCLENBQUMsQ0FGdUM7QUFFeEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBRTlCLDZDQUFtQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsRUFBRSxZQUFZLEVBQUUsS0FBSyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQTtBQUM5SCx3QkFBYyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7QUFFMUQsSUFBSSxDQUFDLHlFQUF5RSxFQUFFO0lBQzlFLE1BQU0sTUFBTSxHQUFHLElBQUksU0FBSSxFQUFFLENBQUE7SUFDekIsTUFBTSxxQkFBVyxDQUFDLE1BQU0sQ0FBQyxDQUFB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